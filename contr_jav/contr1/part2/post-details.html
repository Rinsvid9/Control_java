<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="post_style.css">

</head>
<body>

<script>

    let arr = JSON.parse(localStorage.getItem("selectedPost"));
    console.log(arr);
    const div = document.createElement('div')
    div.classList.add('post-card');
    const ul = document.createElement('ul')
    div.appendChild(ul)
    for([key, value] of Object.entries(arr)) {
        const li = document.createElement('li')
        if (Array.isArray(value)) {
            for (const [innerKey, innerValue] of Object.entries(value)) {
                let li = document.createElement('li')
                li.innerText = `${innerKey}: ${innerValue}`
                ul.appendChild(li)
            }
        } else if (typeof value === 'object' && value !== null) {
                for (const [innerKey1, innerValue1] of Object.entries(value)) {
                    let li = document.createElement('li')
                    li.innerText = `${innerKey1}: ${innerValue1}`
                    ul.appendChild(li)


                }
            } else {
            li.innerText = `${key}: ${value}`
        }

        ul.appendChild(li)
        document.body.appendChild(div)
    }

    fetch(`https://jsonplaceholder.typicode.com/posts/${arr.id}/comments`)
        .then(response => response.json())
        .then(comments => {
            console.log(comments);
            const commentsDiv = document.createElement('div');
            commentsDiv.classList.add('comments-wrapper');

            comments.forEach(comment => {
                const card = document.createElement('div');
                card.classList.add('comment-card');

                card.innerHTML = `
               <h3>PostId: ${comment.postId}</h3>
               <h4>id: ${comment.id}</h4>
               <h4>${comment.name}</h4>
                <p><b>Email:</b> ${comment.email}</p>
                <p>${comment.body}</p>
            `;

                commentsDiv.appendChild(card);
            });

            document.body.appendChild(commentsDiv);
        });



</script>

</body>
</html>